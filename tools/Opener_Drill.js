const img = query("img");
const container = query(".container");
const overlay = query(".overlay");
const paths = query(".paths");
const importInput = query("#importInput");
const next = query("#next");
const prev = query("#prev");
let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0; selected = undefined;
let page = 0, pageData = [[[[408.96,318.08,"F1",-8,0,0,0],[397.6,318.08,"P3",0,0,0,0],[386.24,318.08,"P2",-8,0,0,0],[374.88,318.08,"P1",0,0,0,0],[363.52,318.08,"T2",-8,0,0,0],[346.48,318.08,"F2",0,0,0,0],[329.44,318.08,"T1",-8,0,0,0],[295.36,318.08,"AS2",-8,0,0,0],[312.4,318.08,"F3",0,0,0,0],[278.32,318.08,"F4",0,0,0,0],[261.28,318.08,"AS1",-8,0,0,0],[244.24,318.08,"T6",0,0,0,0],[227.2,318.08,"M1",-8,0,0,0],[426,318.08,"P4",0,0,0,0],[437.36,318.08,"T3",-8,0,0,0],[454.4,318.08,"AS4",0,0,0,0],[471.44,318.08,"T4",-8,0,0,0],[488.48,318.08,"AS3",0,0,0,0],[505.52,318.08,"T5",-8,0,0,0],[522.56,318.08,"C3",0,0,0,0],[556.64,318.08,"C2",0,0,0,0],[573.68,318.08,"F5",-8,0,0,0],[590.72,318.08,"C1",0,0,0,0],[681.6,499.84,"Q2",0,0,0,0],[658.88,499.84,"Q1",0,0,0,0],[636.16,499.84,"Cy2",0,0,0,0],[613.44,499.84,"Cy1",-16,0,0,0],[590.72,499.84,"S2",0,0,0,0],[522.56,499.84,"BD3",0,0,0,0],[568,499.84,"S1",0,0,0,0],[545.28,499.84,"BD4",0,0,0,0],[499.84,499.84,"BD2",0,0,0,0],[477.12,499.84,"BD1",0,0,0,0],[244.24,681.6,"C10",-8,0,0,0],[227.2,681.6,"C9",0,0,0,0],[261.28,681.6,"C8",0,0,0,0],[278.32,681.6,"C11",-8,0,0,0],[295.36,681.6,"C7",0,0,0,0],[312.4,681.6,"TS2",-8,0,0,0],[346.48,681.6,"TS1",-8,0,0,0],[363.52,681.6,"Δ4",0,0,0,0],[408.96,681.6,"C4",-8,0,0,0],[437.36,681.6,"Δ3",0,0,0,0],[454.4,681.6,"C5",-8,0,0,0],[471.44,681.6,"Δ2",0,0,0,0],[488.48,681.6,"C6",-8,0,0,0],[505.52,681.6,"Δ1",0,0,0,0],[522.56,681.6,"Tb4",-8,0,0,0],[556.64,681.6,"Tb3",-8,0,0,0],[573.68,681.6,"Tb1",0,0,0,0],[590.72,681.6,"Tb2",-8,0,0,0],[426,681.6,"P5",-8,0,0,0],[391.92,681.6,"P7",0,0,0,0],[380.56,681.6,"P6",-8,0,0,0]],[[56.8,56.8,"(1) Parallels"],[56.8,272.64,"MM 1-5"],[56.8,772.48,"Drums:"]],[[119.28,56.8,"Hold 4, Move 16"],[113.6,772.48,"Move 8 to A"],[147.68,772.48,"Move 8 to B"]],[[0,[477.12,499.84],[545.28,454.4],[613.44,454.4]],[0,[499.84,499.84],[545.28,482.8],[613.44,477.12]],[0,[522.56,499.84],[545.28,516.88],[613.44,522.56]],[0,[545.28,499.84],[545.28,545.28],[613.44,545.28]],[0],[0,[568,499.84],[681.6,443.04],[636.16,443.04]],[0,[590.72,499.84],[681.6,465.76],[636.16,465.76]],[0,[613.44,499.84],[681.6,488.48],[636.16,488.48]],[0,[636.16,499.84],[681.6,511.2],[636.16,511.2]],[0,[658.88,499.84],[681.6,533.92],[636.16,533.92]],[0,[681.6,499.84],[681.6,556.64],[636.16,556.64]]],["(1) Parallels",148,4,16]],[[[408.96,488.48,"F1",-8,0,0,0],[408.96,374.88,"P3",0,0,0,0],[408.96,261.28,"P2",0,0,0,0],[352.16,318.08,"P1",0,0,0,0],[374.88,181.76,"T2",-8,0,0,0],[374.88,454.4,"F2",0,0,0,0],[335.12,215.84,"T1",-8,0,0,0],[301.04,249.92,"AS2",-8,0,0,0],[335.12,420.32,"F3",0,0,0,0],[301.04,386.24,"F4",0,0,0,0],[266.96,284,"AS1",-8,0,0,0],[266.96,352.16,"T6",0,0,0,0],[227.2,318.08,"M1",-8,0,0,0],[465.76,318.08,"P4",0,0,0,0],[408.96,147.68,"T3",-8,0,0,0],[448.72,454.4,"AS4",0,0,0,0],[448.72,181.76,"T4",-8,0,0,0],[482.8,420.32,"AS3",0,0,0,0],[482.8,215.84,"T5",-8,0,0,0],[522.56,386.24,"C3",0,0,0,0],[556.64,352.16,"C2",0,0,0,0],[556.64,284,"F5",-8,0,0,0],[590.72,318.08,"C1",0,0,0,0],[636.16,556.64,"Q2",4,-3,0,0],[636.16,533.92,"Q1",4,-3,0,0],[636.16,511.2,"Cy2",4,-3,0,0],[266.96,647.52,"C10",-8,0,0,0],[227.2,681.6,"C9",0,0,0,0],[266.96,715.68,"C8",0,0,0,0],[301.04,613.44,"C11",-8,0,0,0],[301.04,749.76,"C7",0,0,0,0],[335.12,579.36,"TS2",-8,0,0,0],[374.88,545.28,"TS1",-8,0,0,0],[374.88,817.92,"Δ4",0,0,0,0],[408.96,511.2,"C4",0,0,0,0],[408.96,852,"Δ3",0,0,0,0],[448.72,545.28,"C5",-8,0,0,0],[448.72,817.92,"Δ2",0,0,0,0],[482.8,579.36,"C6",-8,0,0,0],[482.8,783.84,"Δ1",0,0,0,0],[522.56,613.44,"Tb4",-8,0,0,0],[556.64,647.52,"Tb3",-8,0,0,0],[556.64,715.68,"Tb1",0,0,0,0],[590.72,681.6,"Tb2",-8,0,0,0],[465.76,681.6,"P5",-8,0,0,0],[408.96,738.4,"P7",-8,0,0,0],[408.96,624.8,"P6",-8,0,0,0],[636.16,488.48,"Cy1",4,-3,0,0],[636.16,465.76,"S2",4,-3,0,0],[636.16,443.04,"S1",4,-3,0,0],[613.44,454.4,"BD1",12,-3,0,0],[613.44,477.12,"BD2",12,-3,0,0],[613.44,522.56,"BD3",12,-3,0,0],[613.44,545.28,"BD4",12,-3,0,0],[545.28,454.4,"BD1​",12,-3,0,1],[545.28,482.8,"BD2​",12,-3,0,1],[545.28,516.88,"BD3​",12,-3,0,1],[545.28,545.28,"BD4​",12,-3,0,1],[681.6,443.04,"S1​",4,-3,0,1],[681.6,465.76,"S2​",4,-3,0,1],[681.6,488.48,"Cy1​",4,-3,0,1],[681.6,511.2,"Cy2​",4,-3,0,1],[681.6,533.92,"Q1​",4,-3,0,1],[681.6,556.64,"Q2​",4,-3,0,1]],[[56.8,56.8,"(2) Double Diamonds"],[56.8,420.32,"MM 6-8"]],[[119.28,56.8,"Move 12"],[590.72,403.28,"B"],[619.12,403.28,"B"],[528.24,420.32,"A"],[664.56,408.96,"A"]],[[0,[227.2,681.6],[266.96,647.52],[301.04,613.44],[335.12,579.36],[374.88,545.28],[408.96,511.2],[448.72,545.28],[482.8,579.36],[522.56,613.44],[556.64,647.52],[590.72,681.6],[556.64,715.68],[522.56,749.76],[482.8,783.84],[448.72,817.92],[408.96,852],[374.88,817.92],[335.12,783.84],[301.04,749.76],[266.96,715.68],[227.2,681.6],[266.96,647.52],[301.04,613.44]],[0,[227.2,318.08],[266.96,352.16],[301.04,386.24],[335.12,420.32],[374.88,454.4],[408.96,488.48],[448.72,454.4],[482.8,420.32],[522.56,386.24],[556.64,352.16],[590.72,318.08],[556.64,284],[522.56,249.92],[482.8,215.84],[448.72,181.76],[408.96,147.68],[374.88,181.76],[335.12,215.84],[301.04,249.92],[266.96,284],[227.2,318.08],[266.96,352.16],[301.04,386.24]]],["(2) Double Diamonds",148,0,12]],[[[408.96,488.48,"F4",-8,0,0,0],[408.96,374.88,"P3",0,0,0,0],[408.96,261.28,"P2",0,0,0,0],[352.16,318.08,"P1",0,0,0,0],[374.88,181.76,"T5",-8,0,0,0],[374.88,454.4,"T6",0,0,0,0],[335.12,215.84,"T4",-8,0,0,0],[301.04,249.92,"T3",-8,0,0,0],[335.12,420.32,"M1",0,0,0,0],[301.04,386.24,"AS1",0,0,0,0],[266.96,284,"T2",-8,0,0,0],[266.96,352.16,"AS2",0,0,0,0],[227.2,318.08,"T1",-8,0,0,0],[465.76,318.08,"P4",0,0,0,0],[448.72,454.4,"F3",0,0,0,0],[448.72,181.76,"F5",-8,0,0,0],[482.8,420.32,"F2",0,0,0,0],[482.8,215.84,"C1",-8,0,0,0],[522.56,386.24,"F1",0,0,0,0],[556.64,352.16,"AS4",0,0,0,0],[556.64,284,"C3",-8,0,0,0],[590.72,318.08,"AS3",0,0,0,0],[636.16,556.64,"Q2",4,-3,0,0],[636.16,533.92,"Q1",4,-3,0,0],[636.16,511.2,"Cy2",4,-3,0,0],[266.96,647.52,"C7",-8,0,0,0],[266.96,715.68,"Δ4",0,0,0,0],[301.04,613.44,"C8",-8,0,0,0],[301.04,749.76,"Δ3",0,0,0,0],[335.12,579.36,"C9",-8,0,0,0],[374.88,545.28,"C10",-8,0,0,0],[408.96,511.2,"C11",0,0,0,0],[448.72,545.28,"TS2",-8,0,0,0],[448.72,817.92,"Tb1",0,0,0,0],[482.8,579.36,"TS1",-8,0,0,0],[482.8,783.84,"Tb2",0,0,0,0],[522.56,613.44,"C4",-8,0,0,0],[556.64,647.52,"C5",-8,0,0,0],[556.64,715.68,"Tb4",0,0,0,0],[590.72,681.6,"C6",-8,0,0,0],[465.76,681.6,"P5",-8,0,0,0],[408.96,738.4,"P7",-8,0,0,0],[408.96,624.8,"P6",-8,0,0,0],[636.16,488.48,"Cy1",4,-3,0,0],[636.16,465.76,"S2",4,-3,0,0],[636.16,443.04,"S1",4,-3,0,0],[613.44,454.4,"BD1",12,-3,0,0],[613.44,477.12,"BD2",12,-3,0,0],[613.44,522.56,"BD3",12,-3,0,0],[613.44,545.28,"BD4",12,-3,0,0],[522.56,249.92,"C2",-8,0,0,0],[335.12,783.84,"Δ2",0,0,0,0],[374.88,817.92,"Δ1",0,0,0,0],[522.56,749.76,"Tb3",0,0,0,0]],[[56.8,56.8,"(3) End of the "],[56.8,352.16,"MM 9-12"],[102.24,56.8,"Double Diamond"]],[[119.28,352.16,"Hold 4, Move 12"]],[],["(3) End of the Double Diamond",148,4,12]],[[[408.96,318.08,"F4",-8,0,0,0],[408.96,374.88,"P3",0,0,0,0],[408.96,261.28,"P2",0,0,0,0],[352.16,318.08,"P1",0,0,0,0],[374.88,352.16,"T5",0,0,0,0],[329.44,386.24,"T4",-8,0,0,0],[301.04,426,"T3",-8,0,0,0],[516.88,420.32,"M1",0,0,0,0],[482.8,386.24,"AS1",0,0,0,0],[266.96,454.4,"T2",-8,0,0,0],[448.72,352.16,"AS2",0,0,0,0],[227.2,488.48,"T1",-8,0,0,0],[465.76,318.08,"P4",0,0,0,0],[448.72,284,"F3",-8,0,0,0],[266.96,181.76,"F5",-8,0,0,0],[482.8,249.92,"F2",0,0,0,0],[301.04,215.84,"C1",-8,0,0,0],[522.56,215.84,"F1",0,0,0,0],[556.64,181.76,"AS4",0,0,0,0],[374.88,284,"C3",-8,0,0,0],[590.72,147.68,"AS3",0,0,0,0],[636.16,556.64,"Q2",4,-3,0,0],[636.16,533.92,"Q1",4,-3,0,0],[636.16,511.2,"Cy2",4,-3,0,0],[448.72,647.52,"C7",-8,0,0,0],[266.96,545.28,"Δ4",0,0,0,0],[482.8,613.44,"C8",-8,0,0,0],[301.04,579.36,"Δ3",0,0,0,0],[522.56,579.36,"C9",-8,0,0,0],[556.64,545.28,"C10",-8,0,0,0],[482.8,749.76,"TS1",0,0,0,0],[266.96,817.92,"Tb1",0,0,0,0],[448.72,715.68,"TS2",0,0,0,0],[301.04,783.84,"Tb2",0,0,0,0],[522.56,783.84,"C4",0,0,0,0],[556.64,817.92,"C5",0,0,0,0],[374.88,715.68,"Tb4",0,0,0,0],[590.72,852,"C6",-8,0,0,0],[465.76,681.6,"P5",-8,0,0,0],[408.96,738.4,"P7",-8,0,0,0],[408.96,624.8,"P6",-8,0,0,0],[636.16,488.48,"Cy1",4,-3,0,0],[636.16,465.76,"S2",4,-3,0,0],[636.16,443.04,"S1",4,-3,0,0],[613.44,454.4,"BD1",8,0,0,0],[613.44,522.56,"BD3",14,-2,0,0],[613.44,545.28,"BD4",16,0,0,0],[340.8,249.92,"C2",-8,0,0,0],[335.12,613.44,"Δ2",0,0,0,0],[374.88,647.52,"Δ1",0,0,0,0],[340.8,749.76,"Tb3",0,0,0,0],[613.44,477.12,"BD2",-6,2,0,0],[590.72,511.2,"C11",0,0,0,0],[556.64,454.4,"T6",0,0,0,0]],[[56.8,56.8,"(4) Dos Equis"],[56.8,306.72,"MM 13-16"]],[[119.28,56.8,"Hold 4, Move 12"]],[],["(4) Dos Equis",148,4,12]],[[[227.2,318.08,"F4",-8,0,0,0],[408.96,374.88,"P3",0,0,0,0],[408.96,261.28,"P2",0,0,0,0],[352.16,318.08,"P1",0,0,0,0],[556.64,352.16,"T5",-8,0,0,0],[516.88,386.24,"T4",-8,0,0,0],[482.8,420.32,"T3",-8,0,0,0],[516.88,249.92,"M1",0,0,0,0],[482.8,215.84,"AS1",0,0,0,0],[448.72,454.4,"T2",-8,0,0,0],[448.72,181.76,"AS2",0,0,0,0],[408.96,488.48,"T1",-8,0,0,0],[465.76,318.08,"P4",0,0,0,0],[261.28,284,"F3",0,0,0,0],[261.28,352.16,"F5",-8,0,0,0],[301.04,249.92,"F2",0,0,0,0],[301.04,386.24,"C1",-8,0,0,0],[335.12,215.84,"F1",0,0,0,0],[374.88,181.76,"AS4",0,0,0,0],[374.88,454.4,"C3",-8,0,0,0],[408.96,147.68,"AS3",0,0,0,0],[636.16,556.64,"Q2",4,-3,0,0],[636.16,533.92,"Q1",4,-3,0,0],[636.16,511.2,"Cy2",4,-3,0,0],[448.72,817.92,"C7",-8,0,0,0],[448.72,545.28,"Δ4",0,0,0,0],[482.8,783.84,"C8",-8,0,0,0],[482.8,579.36,"Δ3",0,0,0,0],[516.88,749.76,"C9",-8,0,0,0],[550.96,715.68,"C10",-8,0,0,0],[295.36,749.76,"TS1",0,0,0,0],[261.28,647.52,"Tb1",0,0,0,0],[261.28,715.68,"TS2",0,0,0,0],[301.04,613.44,"Tb2",0,0,0,0],[335.12,783.84,"C4",0,0,0,0],[374.88,817.92,"C5",0,0,0,0],[374.88,545.28,"Tb4",0,0,0,0],[408.96,852,"C6",-8,0,0,0],[465.76,681.6,"P5",-8,0,0,0],[408.96,738.4,"P7",-8,0,0,0],[408.96,624.8,"P6",-8,0,0,0],[636.16,488.48,"Cy1",4,-3,0,0],[636.16,465.76,"S2",4,-3,0,0],[636.16,443.04,"S1",4,-3,0,0],[613.44,454.4,"BD1",12,-3,0,0],[613.44,522.56,"BD3",12,-3,0,0],[613.44,545.28,"BD4",12,-3,0,0],[335.12,420.32,"C2",-8,0,0,0],[516.88,613.44,"Δ2",0,0,0,0],[550.96,647.52,"Δ1",0,0,0,0],[335.12,579.36,"Tb3",0,0,0,0],[613.44,477.12,"BD2",-4,-3,0,0],[590.72,681.6,"C11",0,0,0,0],[556.64,284,"T6",0,0,0,0]],[[56.8,56.8,"(5) Back to Diamonds"],[56.8,426,"MM 17-19"]],[[119.28,56.8,"Move 12"]],[],["(5) Back to Diamonds",148,0,12]],[[[295.36,431.68,"F4",-8,0,0,0],[499.84,499.84,"P3",0,0,0,0],[454.4,454.4,"P2",0,0,0,0],[408.96,408.96,"P1",0,0,0,0],[522.56,431.68,"T5",-8,0,0,0],[545.28,454.4,"T4",-8,0,0,0],[568,477.12,"T3",-8,0,0,0],[590.72,499.84,"T2",-8,0,0,0],[613.44,522.56,"T1",-8,0,0,0],[545.28,545.28,"P4",0,0,0,0],[318.08,408.96,"F3",-8,0,0,0],[318.08,454.4,"F5",-8,0,0,0],[340.8,477.12,"C1",-8,0,0,0],[386.24,522.56,"C3",-8,0,0,0],[681.6,681.6,"Q2",4,-4,0,0],[681.6,664.56,"Q1",4,-4,0,0],[454.4,772.48,"C7",0,0,0,0],[386.24,704.32,"TS1",0,0,0,0],[363.52,636.16,"Tb1",0,0,0,0],[363.52,681.6,"TS2",0,0,0,0],[386.24,613.44,"Tb2",0,0,0,0],[408.96,545.28,"C4",-8,0,0,0],[408.96,727.04,"C5",0,0,0,0],[431.68,568,"Tb4",-8,0,0,0],[431.68,749.76,"C6",0,0,0,0],[590.72,590.72,"P5",-8,0,0,0],[454.4,704.32,"P7",-8,0,0,0],[454.4,658.88,"P6",-8,0,0,0],[681.6,607.76,"S2",4,-4,0,0],[681.6,590.72,"S1",4,-4,0,0],[613.44,692.96,"BD1",4,-3,0,0],[613.44,738.4,"BD3",4,-3,0,0],[613.44,761.12,"BD4",20,-3,0,0],[363.52,499.84,"C2",-8,0,0,0],[522.56,658.88,"Δ1",-8,0,0,0],[408.96,590.72,"Tb3",0,0,0,0],[613.44,715.68,"BD2",-12,-3,0,0],[545.28,681.6,"C11",0,0,0,0],[681.6,647.52,"Cy2",4,-4,0,0],[681.6,624.8,"Cy1",4,-4,0,0],[477.12,749.76,"C8",0,0,0,0],[499.84,727.04,"C9",0,0,0,0],[522.56,704.32,"C10",0,0,0,0],[499.84,636.16,"Δ2",-8,0,0,0],[477.12,613.44,"Δ3",-8,0,0,0],[454.4,590.72,"Δ4",-8,0,0,0],[499.84,408.96,"T6",-8,0,0,0],[477.12,386.24,"M1",-8,0,0,0],[454.4,363.52,"AS1",-8,0,0,0],[431.68,340.8,"AS2",-8,0,0,0],[408.96,318.08,"AS3",-8,0,0,0],[386.24,340.8,"AS4",-8,0,0,0],[363.52,363.52,"F1",-8,0,0,0],[340.8,386.24,"F2",-8,0,0,0]],[[56.8,56.8,"(6) Little Dipper"],[56.8,340.8,"MM 20-21"]],[[119.28,56.8,"Move 8"]],[],["(6) Little Dipper",148,0,8]],[[[312.4,414.64,"F4",-8,0,0,0],[522.56,556.64,"P3",0,0,0,0],[454.4,511.2,"P2",0,0,0,0],[386.24,465.76,"P1",0,0,0,0],[585.04,511.2,"T5",-8,0,0,0],[607.76,533.92,"T4",-8,0,0,0],[630.48,556.64,"T3",-8,0,0,0],[658.88,573.68,"T2",-8,0,0,0],[681.6,590.72,"T1",-8,0,0,0],[568,590.72,"P4",0,0,0,0],[335.12,386.24,"F3",-8,0,0,0],[301.04,448.72,"F5",-5,0,0,0],[295.36,482.8,"C1",-4,0,0,0],[318.08,545.28,"C3",-2,0,0,0],[380.56,812.24,"C7",0,0,0,0],[312.4,749.76,"TS1",-3,0,0,0],[301.04,692.96,"Tb1",-4,0,0,0],[301.04,721.36,"TS2",-3,0,0,0],[306.72,664.56,"Tb2",-5,0,0,0],[346.48,568,"C4",-2,0,0,0],[329.44,778.16,"C5",-2,0,0,0],[346.48,619.12,"Tb4",-5,0,0,0],[352.16,800.88,"C6",-1,0,0,0],[522.56,624.8,"P5",0,0,0,0],[386.24,715.68,"P7",0,0,0,0],[454.4,670.24,"P6",0,0,0,0],[641.84,619.12,"S2",2,2,0,0],[533.92,755.44,"BD4",18,2,0,0],[301.04,516.88,"C2",-3,0,0,0],[465.76,607.76,"Δ1",-8,0,0,0],[323.76,641.84,"Tb3",-5,0,0,0],[511.2,778.16,"C11",0,0,0,0],[414.64,817.92,"C8",0,0,0,0],[448.72,812.24,"C9",0,0,0,0],[482.8,800.88,"C10",0,0,0,0],[443.04,596.4,"Δ2",-8,0,0,0],[408.96,590.72,"Δ3",-8,0,0,0],[374.88,602.08,"Δ4",-8,0,0,0],[562.32,482.8,"T6",-8,0,0,0],[545.28,454.4,"M1",-8,0,0,0],[528.24,426,"AS1",-8,0,0,0],[505.52,397.6,"AS2",-8,0,0,0],[471.44,380.56,"AS3",-8,0,0,0],[437.36,363.52,"AS4",-8,0,0,0],[408.96,363.52,"F1",-8,0,0,0],[369.2,369.2,"F2",-8,0,0,0],[630.48,636.16,"Cy1",2,2,0,0],[619.12,653.2,"Cy2",2,2,0,0],[658.88,602.08,"S1",2,2,0,0],[602.08,664.56,"Q1",2,2,0,0],[585.04,681.6,"Q2",2,2,0,0],[545.28,732.72,"BD3",18,2,0,0],[562.32,715.68,"BD2",18,2,0,0],[573.68,698.64,"BD1",18,2,0,0]],[[56.8,56.8,"(7) Latin Passion Heart"],[56.8,443.04,"MM 22-35"]],[[119.28,56.8,"Hold 40, Move 16"]],[],["(7) Latin Passion Heart",148,40,16]],[[[522.56,545.28,"P3",0,0,0,0],[477.12,545.28,"P2",0,0,0,0],[431.68,545.28,"P1",0,0,0,0],[681.6,499.84,"T3",-14,0,0,0],[454.4,636.16,"P4",0,0,0,0],[363.52,636.16,"C1",-2,0,0,0],[363.52,727.04,"C3",-2,0,0,0],[363.52,908.8,"C7",-2,0,0,0],[545.28,863.36,"TS1",-2,0,0,0],[363.52,772.48,"C4",-2,0,0,0],[363.52,817.92,"C5",-2,0,0,0],[363.52,863.36,"C6",-2,0,0,0],[454.4,710,"P5",0,0,0,0],[454.4,863.36,"P7",0,0,0,0],[454.4,789.52,"P6",0,0,0,0],[363.52,681.6,"C2",-2,0,0,0],[545.28,590.72,"Δ1",-2,0,0,0],[545.28,908.8,"C11",-2,0,0,0],[408.96,908.8,"C8",-2,0,0,0],[454.4,908.8,"C9",-2,0,0,0],[499.84,908.8,"C10",-2,0,0,0],[499.84,590.72,"Δ2",-2,0,0,0],[454.4,590.72,"Δ3",-2,0,0,0],[408.96,590.72,"Δ4",-2,0,0,0],[636.16,318.08,"AS1",-2,0,0,0],[590.72,318.08,"AS2",-2,0,0,0],[545.28,318.08,"AS3",-2,0,0,0],[499.84,318.08,"AS4",-2,0,0,0],[454.4,318.08,"F1",-2,0,0,0],[454.4,363.52,"F2",-2,0,0,0],[613.44,533.92,"Cy1",8,0,0,0],[636.16,499.84,"S1",4,-2,0,0],[681.6,545.28,"T2",-14,0,0,0],[681.6,590.72,"T1",-14,0,0,0],[681.6,454.4,"T4",-18,0,0,0],[681.6,408.96,"T5",-18,0,0,0],[681.6,363.52,"T6",-18,0,0,0],[681.6,318.08,"M1",-18,0,0,0],[454.4,408.96,"F3",-2,0,0,0],[454.4,454.4,"F4",-2,0,0,0],[454.4,499.84,"F5",-2,0,0,0],[636.16,528.24,"S2",4,-2,0,0],[636.16,562.32,"Q1",4,-2,0,0],[636.16,590.72,"Q2",4,-2,0,0],[613.44,556.64,"Cy2",16,0,0,0],[590.72,499.84,"BD1",12,-2,0,0],[590.72,528.24,"BD2",12,-2,0,0],[590.72,562.32,"BD3",12,-2,0,0],[590.72,590.72,"BD4",12,-2,0,0],[545.28,817.92,"TS2",-2,0,0,0],[545.28,772.48,"Tb1",-2,0,0,0],[545.28,727.04,"Tb2",-2,0,0,0],[545.28,681.6,"Tb3",-2,0,0,0],[545.28,636.16,"Tb4",-2,0,0,0]],[[56.8,56.8,"(8) Boxes"],[56.8,255.6,"MM 36-40"]],[[119.28,56.8,"Hold 12, Move 8"]],[],["(8) Boxes",148,12,8]],[[[613.44,545.28,"P3",0,0,0,0],[568,545.28,"P2",0,0,0,0],[522.56,545.28,"P1",0,0,0,0],[681.6,545.28,"T3",-18,0,0,0],[545.28,636.16,"P4",0,0,0,0],[454.4,636.16,"C1",-2,0,0,0],[454.4,727.04,"C3",-2,0,0,0],[454.4,908.8,"C7",-2,0,0,0],[636.16,863.36,"TS1",-2,0,0,0],[454.4,772.48,"C4",-2,0,0,0],[454.4,817.92,"C5",-2,0,0,0],[454.4,863.36,"C6",-2,0,0,0],[545.28,710,"P5",0,0,0,0],[545.28,863.36,"P7",0,0,0,0],[545.28,789.52,"P6",0,0,0,0],[454.4,681.6,"C2",-2,0,0,0],[636.16,590.72,"Δ1",-2,0,0,0],[636.16,908.8,"C11",-2,0,0,0],[499.84,908.8,"C8",-2,0,0,0],[545.28,908.8,"C9",-2,0,0,0],[590.72,908.8,"C10",-2,0,0,0],[590.72,590.72,"Δ2",-2,0,0,0],[545.28,590.72,"Δ3",-2,0,0,0],[499.84,590.72,"Δ4",-2,0,0,0],[636.16,363.52,"AS1",-2,0,0,0],[590.72,363.52,"AS2",-2,0,0,0],[499.84,363.52,"AS3",-2,0,0,0],[454.4,363.52,"AS4",-2,0,0,0],[408.96,363.52,"F1",-2,0,0,0],[408.96,408.96,"F2",-2,0,0,0],[568,443.04,"Cy1",8,0,0,0],[590.72,408.96,"S1",4,-2,0,0],[681.6,590.72,"T2",-18,0,0,0],[681.6,636.16,"T1",-18,0,0,0],[681.6,499.84,"T4",-18,0,0,0],[681.6,454.4,"T5",-18,0,0,0],[681.6,408.96,"T6",-18,0,0,0],[681.6,363.52,"M1",-2,0,0,0],[408.96,454.4,"F3",-2,0,0,0],[408.96,499.84,"F4",-2,0,0,0],[408.96,545.28,"F5",-2,0,0,0],[590.72,437.36,"S2",4,-2,0,0],[590.72,471.44,"Q1",4,-2,0,0],[590.72,499.84,"Q2",4,-2,0,0],[568,465.76,"Cy2",16,0,0,0],[545.28,408.96,"BD1",12,-2,0,0],[545.28,437.36,"BD2",12,-2,0,0],[545.28,471.44,"BD3",12,-2,0,0],[545.28,499.84,"BD4",12,-2,0,0],[636.16,817.92,"TS2",-2,0,0,0],[636.16,772.48,"Tb1",-2,0,0,0],[636.16,727.04,"Tb2",-2,0,0,0],[636.16,681.6,"Tb3",-2,0,0,0],[636.16,636.16,"Tb4",-2,0,0,0]],[[56.8,56.8,"(9) The Machine"],[56.8,346.48,"MM 41-44"]],[[119.28,56.8,"Move 16"]],[[0,[499.84,363.52],[454.4,363.52],[408.96,363.52],[408.96,408.96],[408.96,454.4],[408.96,499.84],[408.96,545.28],[408.96,590.72],[408.96,636.16],[408.96,681.6],[408.96,727.04]],[0,[590.72,363.52],[636.16,363.52],[681.6,363.52],[681.6,408.96],[681.6,454.4],[681.6,499.84],[681.6,545.28],[681.6,590.72],[681.6,636.16],[681.6,681.6],[681.6,727.04],[681.6,772.48],[681.6,817.92]],[0,[454.4,636.16],[454.4,681.6],[454.4,727.04],[454.4,772.48],[454.4,817.92],[454.4,863.36],[454.4,908.8],[499.84,908.8],[545.28,908.8],[590.72,908.8],[636.16,908.8],[636.16,863.36],[636.16,817.92],[636.16,772.48],[636.16,727.04],[636.16,681.6],[636.16,636.16],[636.16,590.72],[636.16,545.28]]],["(9) The Machine",148,0,16]],[[[613.44,363.52,"P3",0,0,0,0],[568,363.52,"P2",0,0,0,0],[522.56,363.52,"P1",0,0,0,0],[545.28,636.16,"P4",0,0,0,0],[454.4,908.8,"C3",-2,0,0,0],[454.4,817.92,"C1",-2,0,0,0],[454.4,863.36,"C2",-2,0,0,0],[545.28,710,"P5",0,0,0,0],[545.28,863.36,"P7",0,0,0,0],[545.28,789.52,"P6",0,0,0,0],[636.16,408.96,"Δ1",-2,0,0,0],[499.84,908.8,"C4",-2,0,0,0],[545.28,908.8,"C5",-2,0,0,0],[590.72,908.8,"C6",-2,0,0,0],[590.72,408.96,"Δ2",-2,0,0,0],[545.28,408.96,"Δ3",-2,0,0,0],[499.84,408.96,"Δ4",-2,0,0,0],[408.96,454.4,"AS3",-2,0,0,0],[408.96,499.84,"AS4",-2,0,0,0],[408.96,545.28,"F1",-2,0,0,0],[408.96,590.72,"F2",-2,0,0,0],[568,261.28,"Cy1",8,0,0,0],[590.72,227.2,"S1",4,-2,0,0],[408.96,636.16,"F3",-2,0,0,0],[408.96,681.6,"F4",-2,0,0,0],[408.96,727.04,"F5",-2,0,0,0],[590.72,255.6,"S2",4,-2,0,0],[590.72,289.68,"Q1",4,-2,0,0],[590.72,318.08,"Q2",4,-2,0,0],[568,284,"Cy2",16,0,0,0],[545.28,227.2,"BD1",12,-2,0,0],[545.28,255.6,"BD2",12,-2,0,0],[545.28,289.68,"BD3",12,-2,0,0],[545.28,318.08,"BD4",12,-2,0,0],[636.16,908.8,"C7",-2,0,0,0],[636.16,863.36,"C8",-2,0,0,0],[636.16,817.92,"C9",-2,0,0,0],[636.16,772.48,"C10",-2,0,0,0],[636.16,727.04,"C11",-2,0,0,0],[636.16,681.6,"TS1",-2,0,0,0],[636.16,636.16,"TS2",-2,0,0,0],[636.16,590.72,"Tb1",-2,0,0,0],[636.16,545.28,"Tb2",-2,0,0,0],[636.16,499.84,"Tb3",-2,0,0,0],[636.16,454.4,"Tb4",-2,0,0,0],[681.6,454.4,"AS2",-2,0,0,0],[681.6,499.84,"AS1",-2,0,0,0],[681.6,545.28,"M1",-2,0,0,0],[681.6,590.72,"T6",-2,0,0,0],[681.6,636.16,"T5",-2,0,0,0],[681.6,681.6,"T4",-2,0,0,0],[681.6,727.04,"T3",-2,0,0,0],[681.6,772.48,"T2",-2,0,0,0],[681.6,817.92,"T1",-2,0,0,0]],[[56.8,56.8,"(9.5) The Machine Cont."],[56.8,477.12,"MM 45-47"]],[[119.28,56.8,"Move 12"]],[[0,[408.96,454.4],[408.96,499.84],[408.96,545.28],[408.96,590.72],[408.96,636.16],[408.96,681.6],[408.96,727.04],[408.96,772.48],[408.96,817.92],[408.96,863.36]],[0,[454.4,817.92],[454.4,863.36],[454.4,908.8],[499.84,908.8],[545.28,908.8],[590.72,908.8],[636.16,908.8],[636.16,863.36],[636.16,817.92],[636.16,772.48],[636.16,727.04],[636.16,681.6],[636.16,636.16],[636.16,590.72]]],["(9.5) The Machine Cont.",148,0,12]],[[[613.44,227.2,"P3",0,0,0,0],[568,227.2,"P2",0,0,0,0],[522.56,227.2,"P1",0,0,0,0],[545.28,636.16,"P4",0,0,0,0],[590.72,908.8,"C3",-2,0,0,0],[499.84,908.8,"C1",-2,0,0,0],[545.28,908.8,"C2",-2,0,0,0],[545.28,710,"P5",0,0,0,0],[545.28,863.36,"P7",0,0,0,0],[545.28,789.52,"P6",0,0,0,0],[636.16,908.8,"C4",-2,0,0,0],[408.96,590.72,"AS3",-2,0,0,0],[408.96,636.16,"AS4",-2,0,0,0],[408.96,681.6,"F1",-2,0,0,0],[408.96,727.04,"F2",-2,0,0,0],[431.68,261.28,"Cy1",8,0,0,0],[454.4,227.2,"S1",4,-2,0,0],[408.96,772.48,"F3",-2,0,0,0],[408.96,817.92,"F4",-2,0,0,0],[408.96,863.36,"F5",-2,0,0,0],[454.4,255.6,"S2",4,-2,0,0],[454.4,289.68,"Q1",4,-2,0,0],[454.4,318.08,"Q2",4,-2,0,0],[431.68,284,"Cy2",16,0,0,0],[408.96,227.2,"BD1",12,-2,0,0],[408.96,255.6,"BD2",12,-2,0,0],[408.96,289.68,"BD3",12,-2,0,0],[408.96,318.08,"BD4",12,-2,0,0],[636.16,863.36,"C5",-2,0,0,0],[636.16,817.92,"C6",-2,0,0,0],[636.16,772.48,"C7",-2,0,0,0],[636.16,727.04,"C8",-2,0,0,0],[636.16,681.6,"C9",-2,0,0,0],[636.16,636.16,"C10",-2,0,0,0],[636.16,590.72,"C11",-2,0,0,0],[636.16,545.28,"TS1",-2,0,0,0],[636.16,408.96,"Tb2",-2,0,0,0],[636.16,499.84,"TS2",-2,0,0,0],[636.16,454.4,"Tb1",-2,0,0,0],[636.16,363.52,"Tb3",-2,0,0,0],[636.16,318.08,"Tb4",-2,0,0,0],[636.16,272.64,"Δ1",-2,0,0,0],[499.84,272.64,"Δ4",0,0,0,0],[545.28,272.64,"Δ3",-2,0,0,0],[590.72,272.64,"Δ2",-2,0,0,0],[681.6,908.8,"T2",-2,0,0,0],[681.6,817.92,"T4",-2,0,0,0],[681.6,954.24,"T1",-2,0,0,0],[681.6,863.36,"T3",-2,0,0,0],[681.6,772.48,"T5",-2,0,0,0],[681.6,727.04,"T6",-2,0,0,0],[681.6,681.6,"M1",-2,0,0,0],[681.6,636.16,"AS1",-2,0,0,0],[681.6,590.72,"AS2",-2,0,0,0]],[[56.8,56.8,"(10) End of the Machine"],[56.8,477.12,"MM 48-52"]],[[119.28,56.8,"Hold 4, Move 16"]],[[0,[499.84,908.8],[545.28,908.8],[590.72,908.8],[636.16,908.8],[636.16,863.36],[636.16,817.92],[636.16,772.48],[636.16,727.04],[636.16,681.6],[636.16,636.16],[636.16,590.72],[681.6,590.72],[681.6,636.16],[681.6,681.6],[681.6,727.04],[681.6,772.48],[681.6,817.92],[681.6,863.36],[681.6,908.8],[681.6,954.24],[727.04,954.24],[727.04,908.8],[727.04,863.36],[727.04,817.92]],[0,[499.84,272.64],[545.28,272.64],[590.72,272.64],[636.16,272.64],[636.16,318.08],[636.16,363.52],[636.16,408.96],[636.16,454.4],[636.16,499.84],[636.16,545.28],[681.6,545.28],[681.6,499.84],[681.6,454.4],[681.6,408.96]]],["(10) End of the Machine",148,4,16]],[[[545.28,499.84,"P3",0,0,0,0],[545.28,408.96,"P2",0,0,0,0],[545.28,318.08,"P1",0,0,0,0],[727.04,908.8,"T3",-2,0,0,0],[545.28,590.72,"P4",0,0,0,0],[636.16,863.36,"C1",-2,0,0,0],[545.28,681.6,"P5",0,0,0,0],[545.28,863.36,"P7",0,0,0,0],[545.28,772.48,"P6",0,0,0,0],[590.72,590.72,"AS3",-2,0,0,0],[590.72,636.16,"AS4",-2,0,0,0],[590.72,681.6,"F1",-2,0,0,0],[590.72,727.04,"F2",-2,0,0,0],[431.68,471.44,"Cy1",8,0,0,0],[454.4,454.4,"S1",4,-2,0,0],[727.04,863.36,"T2",-18,0,0,0],[727.04,817.92,"T1",-2,0,0,0],[727.04,954.24,"T4",-18,0,0,0],[590.72,772.48,"F3",-2,0,0,0],[590.72,817.92,"F4",-2,0,0,0],[590.72,863.36,"F5",-2,0,0,0],[454.4,482.8,"S2",4,-2,0,0],[454.4,516.88,"Q1",4,-2,0,0],[454.4,545.28,"Q2",4,-2,0,0],[431.68,528.24,"Cy2",16,0,0,0],[408.96,454.4,"BD1",12,-2,0,0],[408.96,482.8,"BD2",12,-2,0,0],[408.96,516.88,"BD3",12,-2,0,0],[408.96,545.28,"BD4",12,-2,0,0],[636.16,817.92,"C2",-2,0,0,0],[636.16,727.04,"C4",-2,0,0,0],[636.16,681.6,"C5",-2,0,0,0],[636.16,772.48,"C3",-2,0,0,0],[636.16,636.16,"C6",-2,0,0,0],[636.16,590.72,"C7",-2,0,0,0],[636.16,499.84,"Tb4",-2,0,0,0],[636.16,545.28,"Tb3",-2,0,0,0],[636.16,454.4,"Δ1",-2,0,0,0],[636.16,408.96,"Δ2",-2,0,0,0],[636.16,363.52,"Δ3",-2,0,0,0],[636.16,318.08,"Δ4",-2,0,0,0],[681.6,408.96,"TS1",-2,0,0,0],[681.6,454.4,"TS2",-2,0,0,0],[681.6,499.84,"Tb1",-2,0,0,0],[681.6,545.28,"Tb2",-2,0,0,0],[681.6,590.72,"C8",-2,0,0,0],[681.6,636.16,"C9",-2,0,0,0],[681.6,681.6,"C10",-2,0,0,0],[681.6,727.04,"C11",-2,0,0,0],[681.6,772.48,"AS2",-2,0,0,0],[681.6,817.92,"AS1",-2,0,0,0],[681.6,863.36,"M1",-2,0,0,0],[681.6,908.8,"T6",-2,0,0,0],[681.6,954.24,"T5",-2,0,0,0]],[[56.8,56.8,"(11) Machine Smash"],[56.8,414.64,"MM 53-55"]],[[119.28,56.8,"Move 12"]],[],["(11) Machine Smash",148,0,12]],[[[613.44,499.84,"P3",-4,0,0,0],[522.56,408.96,"P2",-4,0,0,0],[590.72,329.44,"P1",-4,0,0,0],[568,681.6,"P4",-4,0,0,0],[624.8,874.72,"C1",0,0,0,0],[499.84,772.48,"P5",-4,0,0,0],[613.44,863.36,"P7",-4,0,0,0],[692.96,772.48,"P6",-4,0,0,0],[590.72,670.24,"AS3",-6,0,0,0],[590.72,692.96,"AS4",-2,0,0,0],[522.56,749.76,"F1",-6,0,0,0],[545.28,761.12,"F2",-10,0,0,0],[499.84,562.32,"Cy1",8,0,0,0],[522.56,545.28,"S1",4,-2,0,0],[727.04,738.4,"T1",5,0,0,0],[522.56,772.48,"F3",-2,0,0,0],[545.28,783.84,"F4",2,0,0,0],[522.56,795.2,"F5",-2,0,0,0],[522.56,573.68,"S2",4,-2,0,0],[522.56,607.76,"Q1",4,-2,0,0],[522.56,636.16,"Q2",4,-2,0,0],[499.84,619.12,"Cy2",16,0,0,0],[477.12,545.28,"BD1",12,-2,0,0],[477.12,573.68,"BD2",12,-2,0,0],[477.12,607.76,"BD3",12,-2,0,0],[477.12,636.16,"BD4",12,-2,0,0],[636.16,863.36,"C2",2,0,0,0],[636.16,533.92,"C4",-2,0,0,0],[636.16,511.2,"C5",-3,0,0,0],[624.8,852,"C3",-8,0,0,0],[636.16,488.48,"C6",-5,0,0,0],[636.16,465.76,"C7",-6,0,0,0],[613.44,340.8,"Tb4",-2,0,0,0],[613.44,363.52,"Tb3",0,0,0,0],[556.64,426,"Δ1",4,0,0,0],[556.64,391.92,"Δ2",-12,0,0,0],[545.28,414.64,"Δ3",-1,0,0,0],[545.28,403.28,"Δ4",-7,0,0,0],[636.16,318.08,"TS1",-8,0,0,0],[613.44,318.08,"TS2",-8,0,0,0],[636.16,340.8,"Tb1",4,0,0,0],[636.16,363.52,"Tb2",0,0,0,0],[658.88,465.76,"C8",5,0,0,0],[658.88,488.48,"C9",4,0,0,0],[658.88,511.2,"C10",4,0,0,0],[658.88,533.92,"C11",4,0,0,0],[613.44,670.24,"AS2",-10,0,0,0],[613.44,692.96,"AS1",2,0,0,0],[715.68,749.76,"M1",-6,0,0,0],[715.68,772.48,"T6",-2,0,0,0],[715.68,795.2,"T5",-2,0,0,0],[727.04,761.12,"T2",5,0,0,0],[727.04,783.84,"T3",3,0,0,0],[727.04,806.56,"T4",3,0,0,0]],[[56.8,56.8,"(12) Say Cheese"],[56.8,357.84,"MM 56-65"]],[[119.28,56.8,"Hold 24, Move 16"]],[],["(12) Say Cheese",148,24,16]],[[[619.12,346.48,"P3",-4,0,0,0],[499.84,408.96,"P2",-4,0,0,0],[698.64,346.48,"P1",-4,0,0,0],[403.28,619.12,"P4",0,0,0,0],[636.16,772.48,"C1",4,0,0,0],[562.32,800.88,"P5",-4,0,0,0],[653.2,800.88,"P7",-4,0,0,0],[738.4,800.88,"P6",-4,0,0,0],[545.28,590.72,"AS3",-12,0,0,0],[590.72,681.6,"AS1",4,0,0,0],[704.32,636.16,"T1",4,0,0,0],[516.88,710,"F3",4,0,0,0],[528.24,744.08,"F4",4,0,0,0],[545.28,772.48,"F5",4,0,0,0],[363.52,522.56,"BD1",12,0,0,0],[363.52,568,"BD2",12,0,0,0],[363.52,658.88,"BD4",12,0,0,0],[363.52,613.44,"BD3",12,0,0,0],[619.12,744.08,"C2",4,0,0,0],[590.72,590.72,"C4",4,0,0,0],[619.12,528.24,"C5",-12,0,0,0],[607.76,710,"C3",-12,0,0,0],[653.2,471.44,"C6",-12,0,0,0],[681.6,408.96,"C7",-12,0,0,0],[499.84,590.72,"Δ1",4,0,0,0],[516.88,562.32,"Δ2",-12,0,0,0],[454.4,590.72,"Δ4",4,0,0,0],[607.76,380.56,"TS1",-12,0,0,0],[692.96,380.56,"C8",4,0,0,0],[664.56,437.36,"C9",4,0,0,0],[636.16,499.84,"C10",4,0,0,0],[607.76,562.32,"C11",4,0,0,0],[562.32,619.12,"AS4",-12,0,0,0],[573.68,653.2,"AS2",4,0,0,0],[636.16,590.72,"M1",-12,0,0,0],[727.04,772.48,"T6",-4,0,0,0],[710,744.08,"T5",4,0,0,0],[664.56,653.2,"T2",4,0,0,0],[681.6,681.6,"T3",4,0,0,0],[698.64,710,"T4",4,0,0,0],[590.72,408.96,"TS2",-12,0,0,0],[573.68,437.36,"Tb1",-12,0,0,0],[562.32,471.44,"Tb2",-12,0,0,0],[545.28,499.84,"Tb4",-12,0,0,0],[528.24,528.24,"Tb3",-12,0,0,0],[482.8,437.36,"Cy1",20,0,0,0],[471.44,471.44,"Cy2",20,0,0,0],[437.36,528.24,"S2",20,0,0,0],[426,562.32,"Q1",20,0,0,0],[454.4,499.84,"S1",20,0,0,0],[408.96,590.72,"Q2",20,0,0,0],[471.44,619.12,"Δ3",4,0,0,0],[482.8,653.2,"F1",4,0,0,0],[499.84,681.6,"F2",4,0,0,0]],[[56.8,56.8,"(13) The Shuffle"],[56.8,357.84,"MM 66-67"]],[[119.28,56.8,"Move 8"]],[],["(13) The Shuffle",148,0,8]],[[[499.84,346.48,"P3",-4,0,0,0],[408.96,408.96,"P2",-4,0,0,0],[590.72,346.48,"P1",-4,0,0,0],[408.96,619.12,"P4",-4,0,0,0],[545.28,772.48,"C1",4,0,0,0],[454.4,800.88,"P5",-4,0,0,0],[545.28,800.88,"P7",-4,0,0,0],[636.16,800.88,"P6",-4,0,0,0],[545.28,590.72,"AS3",-12,0,0,0],[545.28,681.6,"AS1",4,0,0,0],[636.16,619.12,"T1",4,0,0,0],[454.4,710,"F3",4,0,0,0],[454.4,744.08,"F4",4,0,0,0],[454.4,772.48,"F5",4,0,0,0],[363.52,522.56,"BD1",12,0,0,0],[363.52,568,"BD2",12,0,0,0],[363.52,658.88,"BD4",12,0,0,0],[363.52,613.44,"BD3",12,0,0,0],[545.28,744.08,"C2",4,0,0,0],[590.72,590.72,"C4",4,0,0,0],[590.72,528.24,"C5",-12,0,0,0],[545.28,710,"C3",-12,0,0,0],[590.72,471.44,"C6",-12,0,0,0],[590.72,408.96,"C7",-12,0,0,0],[499.84,590.72,"Δ1",4,0,0,0],[499.84,562.32,"Δ2",-12,0,0,0],[454.4,590.72,"Δ4",4,0,0,0],[499.84,380.56,"TS1",-12,0,0,0],[590.72,380.56,"C8",4,0,0,0],[590.72,437.36,"C9",4,0,0,0],[590.72,499.84,"C10",4,0,0,0],[590.72,562.32,"C11",4,0,0,0],[545.28,619.12,"AS4",-12,0,0,0],[545.28,653.2,"AS2",4,0,0,0],[636.16,590.72,"M1",-12,0,0,0],[636.16,772.48,"T6",4,0,0,0],[636.16,744.08,"T5",4,0,0,0],[636.16,653.2,"T2",4,0,0,0],[636.16,681.6,"T3",4,0,0,0],[636.16,710,"T4",4,0,0,0],[499.84,408.96,"TS2",-12,0,0,0],[499.84,437.36,"Tb1",-12,0,0,0],[499.84,471.44,"Tb2",-12,0,0,0],[499.84,499.84,"Tb4",-12,0,0,0],[499.84,528.24,"Tb3",-12,0,0,0],[408.96,437.36,"Cy1",20,0,0,0],[408.96,471.44,"Cy2",20,0,0,0],[408.96,528.24,"S2",20,0,0,0],[408.96,562.32,"Q1",20,0,0,0],[408.96,499.84,"S1",20,0,0,0],[408.96,590.72,"Q2",20,0,0,0],[454.4,619.12,"Δ3",4,0,0,0],[454.4,653.2,"F1",4,0,0,0],[454.4,681.6,"F2",4,0,0,0]],[[56.8,56.8,"(14) Interlace"],[56.8,306.72,"MM 68-70"]],[[119.28,56.8,"Move 12"]],[],["(14) Interlace",148,0,12]],[[[545.28,408.96,"P3",-4,0,0,0],[454.4,408.96,"P2",-4,0,0,0],[636.16,408.96,"P1",-4,0,0,0],[454.4,772.48,"P4",-4,0,0,0],[499.84,772.48,"P5",-2,0,0,0],[590.72,772.48,"P7",-4,0,0,0],[681.6,772.48,"P6",-4,0,0,0],[408.96,522.56,"BD1",12,0,0,0],[408.96,568,"BD2",12,0,0,0],[408.96,658.88,"BD4",12,0,0,0],[408.96,613.44,"BD3",12,0,0,0],[681.6,727.04,"T6",-2,0,0,0],[681.6,636.16,"T4",-2,0,0,0],[681.6,681.6,"T5",-2,0,0,0],[681.6,590.72,"T3",-2,0,0,0],[681.6,545.28,"T2",-2,0,0,0],[681.6,499.84,"T1",-2,0,0,0],[681.6,454.4,"M1",-2,0,0,0],[636.16,749.76,"C4",-2,0,0,0],[636.16,704.32,"C11",-2,0,0,0],[636.16,658.88,"C5",-2,0,0,0],[636.16,613.44,"C10",-2,0,0,0],[636.16,568,"C6",-2,0,0,0],[636.16,522.56,"C9",-2,0,0,0],[636.16,477.12,"C7",-2,0,0,0],[636.16,431.68,"C8",-2,0,0,0],[590.72,454.4,"AS3",-2,0,0,0],[590.72,499.84,"AS4",-2,0,0,0],[590.72,545.28,"AS2",-2,0,0,0],[590.72,590.72,"AS1",-2,0,0,0],[590.72,636.16,"C3",-2,0,0,0],[590.72,681.6,"C2",-2,0,0,0],[590.72,727.04,"C1",-2,0,0,0],[545.28,749.76,"Δ1",-2,0,0,0],[545.28,704.32,"Δ2",-2,0,0,0],[545.28,658.88,"Tb3",-2,0,0,0],[545.28,613.44,"Tb4",-2,0,0,0],[545.28,568,"Tb2",-2,0,0,0],[545.28,522.56,"Tb1",-2,0,0,0],[545.28,477.12,"TS2",-2,0,0,0],[545.28,431.68,"TS1",-2,0,0,0],[499.84,454.4,"Δ4",-2,0,0,0],[499.84,499.84,"Δ3",-2,0,0,0],[499.84,545.28,"F1",-2,0,0,0],[499.84,590.72,"F2",-2,0,0,0],[499.84,636.16,"F3",-2,0,0,0],[499.84,681.6,"F4",-2,0,0,0],[499.84,727.04,"F5",-2,0,0,0],[454.4,704.32,"Q2",-2,0,0,0],[454.4,658.88,"Q1",-2,0,0,0],[454.4,613.44,"S2",-2,0,0,0],[454.4,568,"S1",-2,0,0,0],[454.4,522.56,"Cy2",-2,0,0,0],[454.4,477.12,"Cy1",-2,0,0,0]],[[56.8,56.8,"(15) Big Block"],[56.8,312.4,"MM 71-74"]],[[119.28,56.8,"Hold 12, Move 4"]],[],["(15) Big Block",156,12,4]],[[[590.72,363.52,"P3",-4,0,0,0],[499.84,363.52,"P2",-4,0,0,0],[681.6,363.52,"P1",-4,0,0,0],[408.96,817.92,"P4",-4,0,0,0],[499.84,817.92,"P5",-4,0,0,0],[590.72,817.92,"P7",-4,0,0,0],[681.6,817.92,"P6",-4,0,0,0],[408.96,522.56,"BD1",12,0,0,0],[408.96,568,"BD2",12,0,0,0],[408.96,658.88,"BD4",12,0,0,0],[408.96,613.44,"BD3",12,0,0,0],[681.6,681.6,"T6",-2,0,0,0],[681.6,590.72,"T4",-2,0,0,0],[681.6,636.16,"T5",-2,0,0,0],[681.6,545.28,"T3",-2,0,0,0],[681.6,499.84,"T2",-2,0,0,0],[681.6,454.4,"T1",-2,0,0,0],[681.6,408.96,"M1",-2,0,0,0],[636.16,795.2,"C4",-2,0,0,0],[636.16,749.76,"C11",-2,0,0,0],[636.16,704.32,"C5",-2,0,0,0],[636.16,658.88,"C10",-2,0,0,0],[636.16,613.44,"C6",-2,0,0,0],[636.16,568,"C9",-2,0,0,0],[636.16,522.56,"C7",-2,0,0,0],[636.16,477.12,"C8",-2,0,0,0],[590.72,408.96,"AS3",-2,0,0,0],[590.72,454.4,"AS4",-2,0,0,0],[590.72,499.84,"AS2",-2,0,0,0],[590.72,545.28,"AS1",-2,0,0,0],[590.72,590.72,"C3",-2,0,0,0],[590.72,636.16,"C2",-2,0,0,0],[590.72,681.6,"C1",-2,0,0,0],[545.28,795.2,"Δ1",-2,0,0,0],[545.28,749.76,"Δ2",-2,0,0,0],[545.28,704.32,"Tb3",-2,0,0,0],[545.28,658.88,"Tb4",-2,0,0,0],[545.28,613.44,"Tb2",-2,0,0,0],[545.28,568,"Tb1",-2,0,0,0],[545.28,522.56,"TS2",-2,0,0,0],[545.28,477.12,"TS1",-2,0,0,0],[499.84,408.96,"Δ4",-2,0,0,0],[499.84,454.4,"Δ3",-2,0,0,0],[499.84,499.84,"F1",-2,0,0,0],[499.84,545.28,"F2",-2,0,0,0],[499.84,590.72,"F3",-2,0,0,0],[499.84,636.16,"F4",-2,0,0,0],[499.84,681.6,"F5",-2,0,0,0],[454.4,749.76,"Q2",-2,0,0,0],[454.4,704.32,"Q1",-2,0,0,0],[454.4,658.88,"S2",-2,0,0,0],[454.4,613.44,"S1",-2,0,0,0],[454.4,568,"Cy2",-2,0,0,0],[454.4,522.56,"Cy1",-2,0,0,0]],[[56.8,56.8,"(15.1)"],[56.8,181.76,"MM 75"]],[[119.28,56.8,"Move 4"]],[],["(15.1) Big Block (Cont.)",156,0,4]],[[[590.72,363.52,"P3",-4,0,0,0],[499.84,363.52,"P2",-4,0,0,0],[681.6,363.52,"P1",-4,0,0,0],[408.96,817.92,"P4",-4,0,0,0],[499.84,817.92,"P5",-4,0,0,0],[590.72,817.92,"P7",-2,0,0,0],[681.6,817.92,"P6",-2,0,0,0],[408.96,522.56,"BD1",12,0,0,0],[408.96,568,"BD2",12,0,0,0],[408.96,658.88,"BD4",12,0,0,0],[408.96,613.44,"BD3",12,0,0,0],[636.16,681.6,"T6",-2,0,0,0],[636.16,590.72,"T4",-2,0,0,0],[636.16,636.16,"T5",-2,0,0,0],[636.16,545.28,"T3",-2,0,0,0],[636.16,499.84,"T2",-2,0,0,0],[636.16,454.4,"T1",-2,0,0,0],[636.16,408.96,"M1",-2,0,0,0],[681.6,795.2,"C4",-2,0,0,0],[681.6,749.76,"C11",-2,0,0,0],[681.6,704.32,"C5",-2,0,0,0],[681.6,658.88,"C10",-2,0,0,0],[681.6,613.44,"C6",-2,0,0,0],[681.6,568,"C9",-2,0,0,0],[681.6,522.56,"C7",-2,0,0,0],[681.6,477.12,"C8",-2,0,0,0],[545.28,408.96,"AS3",-2,0,0,0],[545.28,454.4,"AS4",-2,0,0,0],[545.28,499.84,"AS2",-2,0,0,0],[545.28,545.28,"AS1",-2,0,0,0],[545.28,590.72,"C3",-2,0,0,0],[545.28,636.16,"C2",-2,0,0,0],[545.28,681.6,"C1",-2,0,0,0],[590.72,795.2,"Δ1",-2,0,0,0],[590.72,749.76,"Δ2",-2,0,0,0],[590.72,704.32,"Tb3",-2,0,0,0],[590.72,658.88,"Tb4",-2,0,0,0],[590.72,613.44,"Tb2",-2,0,0,0],[590.72,568,"Tb1",-2,0,0,0],[590.72,522.56,"TS2",-2,0,0,0],[590.72,477.12,"TS1",-2,0,0,0],[454.4,408.96,"Δ4",-2,0,0,0],[454.4,454.4,"Δ3",-2,0,0,0],[454.4,499.84,"F1",-2,0,0,0],[454.4,545.28,"F2",-2,0,0,0],[454.4,590.72,"F3",-2,0,0,0],[454.4,636.16,"F4",-2,0,0,0],[454.4,681.6,"F5",-2,0,0,0],[499.84,749.76,"Q2",-2,0,0,0],[499.84,704.32,"Q1",-2,0,0,0],[499.84,658.88,"S2",-2,0,0,0],[499.84,613.44,"S1",-2,0,0,0],[499.84,568,"Cy2",-2,0,0,0],[499.84,522.56,"Cy1",-2,0,0,0]],[[56.8,56.8,"(15.2)"],[56.8,181.76,"MM 76"]],[[119.28,56.8,"Move 4"]],[],["(15.2) Big Block (Cont.)",156,0,4]],[[[590.72,363.52,"P3",-4,0,0,0],[499.84,363.52,"P2",-4,0,0,0],[681.6,363.52,"P1",-4,0,0,0],[408.96,817.92,"P4",-4,0,0,0],[499.84,817.92,"P5",-4,0,0,0],[590.72,817.92,"P7",-2,0,0,0],[681.6,817.92,"P6",-2,0,0,0],[408.96,522.56,"BD1",12,0,0,0],[408.96,568,"BD2",12,0,0,0],[408.96,658.88,"BD4",12,0,0,0],[408.96,613.44,"BD3",12,0,0,0],[636.16,727.04,"T6",-2,0,0,0],[636.16,636.16,"T4",-2,0,0,0],[636.16,681.6,"T5",-2,0,0,0],[636.16,590.72,"T3",-2,0,0,0],[636.16,545.28,"T2",-2,0,0,0],[636.16,499.84,"T1",-2,0,0,0],[636.16,454.4,"M1",-2,0,0,0],[681.6,749.76,"C4",-2,0,0,0],[681.6,704.32,"C11",-2,0,0,0],[681.6,658.88,"C5",-2,0,0,0],[681.6,613.44,"C10",-2,0,0,0],[681.6,568,"C6",-2,0,0,0],[681.6,522.56,"C9",-2,0,0,0],[681.6,477.12,"C7",-2,0,0,0],[681.6,431.68,"C8",-2,0,0,0],[545.28,454.4,"AS3",-2,0,0,0],[545.28,499.84,"AS4",-2,0,0,0],[545.28,545.28,"AS2",-2,0,0,0],[545.28,590.72,"AS1",-2,0,0,0],[545.28,636.16,"C3",-2,0,0,0],[545.28,681.6,"C2",-2,0,0,0],[545.28,727.04,"C1",-2,0,0,0],[590.72,749.76,"Δ1",-2,0,0,0],[590.72,704.32,"Δ2",-2,0,0,0],[590.72,658.88,"Tb3",-2,0,0,0],[590.72,613.44,"Tb4",-2,0,0,0],[590.72,568,"Tb2",-2,0,0,0],[590.72,522.56,"Tb1",-2,0,0,0],[590.72,477.12,"TS2",-2,0,0,0],[590.72,431.68,"TS1",-2,0,0,0],[454.4,454.4,"Δ4",-2,0,0,0],[454.4,499.84,"Δ3",-2,0,0,0],[454.4,545.28,"F1",-2,0,0,0],[454.4,590.72,"F2",-2,0,0,0],[454.4,636.16,"F3",-2,0,0,0],[454.4,681.6,"F4",-2,0,0,0],[454.4,727.04,"F5",-2,0,0,0],[499.84,704.32,"Q2",-2,0,0,0],[499.84,658.88,"Q1",-2,0,0,0],[499.84,613.44,"S2",-2,0,0,0],[499.84,568,"S1",-2,0,0,0],[499.84,522.56,"Cy2",-2,0,0,0],[499.84,477.12,"Cy1",-2,0,0,0]],[[56.8,56.8,"(15.3)"],[56.8,181.76,"MM 77"]],[[119.28,56.8,"Move 4"]],[],["(15.3) Big Block (Cont.)",156,0,4]],[[[590.72,363.52,"P3",-4,0,0,0],[499.84,363.52,"P2",-4,0,0,0],[681.6,363.52,"P1",-4,0,0,0],[408.96,817.92,"P4",-4,0,0,0],[499.84,817.92,"P5",-4,0,0,0],[590.72,817.92,"P7",-2,0,0,0],[681.6,817.92,"P6",-2,0,0,0],[408.96,522.56,"BD1",12,0,0,0],[408.96,568,"BD2",12,0,0,0],[408.96,658.88,"BD4",12,0,0,0],[408.96,613.44,"BD3",12,0,0,0],[681.6,727.04,"T6",-2,0,0,0],[681.6,636.16,"T4",-2,0,0,0],[681.6,681.6,"T5",-2,0,0,0],[681.6,590.72,"T3",-2,0,0,0],[681.6,545.28,"T2",-2,0,0,0],[681.6,499.84,"T1",-2,0,0,0],[681.6,454.4,"M1",-2,0,0,0],[636.16,749.76,"C4",-2,0,0,0],[636.16,704.32,"C11",-2,0,0,0],[636.16,658.88,"C5",-2,0,0,0],[636.16,613.44,"C10",-2,0,0,0],[636.16,568,"C6",-2,0,0,0],[636.16,522.56,"C9",-2,0,0,0],[636.16,477.12,"C7",-2,0,0,0],[636.16,431.68,"C8",-2,0,0,0],[590.72,454.4,"AS3",-2,0,0,0],[590.72,499.84,"AS4",-2,0,0,0],[590.72,545.28,"AS2",-2,0,0,0],[590.72,590.72,"AS1",-2,0,0,0],[590.72,636.16,"C3",-2,0,0,0],[590.72,681.6,"C2",-2,0,0,0],[590.72,727.04,"C1",-2,0,0,0],[545.28,749.76,"Δ1",-2,0,0,0],[545.28,704.32,"Δ2",-2,0,0,0],[545.28,658.88,"Tb3",-2,0,0,0],[545.28,613.44,"Tb4",-2,0,0,0],[545.28,568,"Tb2",-2,0,0,0],[545.28,522.56,"Tb1",-2,0,0,0],[545.28,477.12,"TS2",-2,0,0,0],[545.28,431.68,"TS1",-2,0,0,0],[499.84,454.4,"Δ4",-2,0,0,0],[499.84,499.84,"Δ3",-2,0,0,0],[499.84,545.28,"F1",-2,0,0,0],[499.84,590.72,"F2",-2,0,0,0],[499.84,636.16,"F3",-2,0,0,0],[499.84,681.6,"F4",-2,0,0,0],[499.84,727.04,"F5",-2,0,0,0],[454.4,704.32,"Q2",-2,0,0,0],[454.4,658.88,"Q1",-2,0,0,0],[454.4,613.44,"S2",-2,0,0,0],[454.4,568,"S1",-2,0,0,0],[454.4,522.56,"Cy2",-2,0,0,0],[454.4,477.12,"Cy1",-2,0,0,0]],[[56.8,56.8,"(15.4) End of the Big Block"],[56.8,505.52,"MM 78-82"]],[[119.28,56.8,"Hold 8, Move 12"]],[],["(15.4) Big Block (Cont.)",156,8,12]],[[[590.72,454.4,"P3",-2,0,0,0],[499.84,363.52,"P2",-4,0,0,0],[681.6,545.28,"P1",-2,0,0,0],[408.96,681.6,"P4",-4,0,0,0],[499.84,772.48,"P5",-4,0,0,0],[590.72,863.36,"P7",-2,0,0,0],[681.6,954.24,"P6",-2,0,0,0],[408.96,454.4,"BD1",12,0,0,0],[408.96,499.84,"BD2",12,0,0,0],[408.96,590.72,"BD4",12,0,0,0],[408.96,545.28,"BD3",12,0,0,0],[681.6,863.36,"T6",-2,0,0,0],[681.6,772.48,"T4",-2,0,0,0],[681.6,817.92,"T5",-2,0,0,0],[681.6,727.04,"T3",-2,0,0,0],[681.6,681.6,"T2",-2,0,0,0],[681.6,636.16,"T1",-2,0,0,0],[681.6,590.72,"M1",-2,0,0,0],[636.16,817.92,"C4",-2,0,0,0],[636.16,772.48,"C11",-2,0,0,0],[636.16,727.04,"C5",-2,0,0,0],[636.16,681.6,"C10",-2,0,0,0],[636.16,636.16,"C6",-2,0,0,0],[636.16,590.72,"C9",-2,0,0,0],[636.16,545.28,"C7",-2,0,0,0],[636.16,499.84,"C8",-2,0,0,0],[590.72,499.84,"AS3",-2,0,0,0],[590.72,545.28,"AS4",-2,0,0,0],[590.72,590.72,"AS2",-2,0,0,0],[590.72,636.16,"AS1",-2,0,0,0],[590.72,681.6,"C3",-2,0,0,0],[590.72,727.04,"C2",-2,0,0,0],[590.72,772.48,"C1",-2,0,0,0],[545.28,727.04,"Δ1",-2,0,0,0],[545.28,681.6,"Δ2",-2,0,0,0],[545.28,636.16,"Tb3",-2,0,0,0],[545.28,590.72,"Tb4",-2,0,0,0],[545.28,545.28,"Tb2",-2,0,0,0],[545.28,499.84,"Tb1",-2,0,0,0],[545.28,454.4,"TS2",-2,0,0,0],[545.28,408.96,"TS1",-2,0,0,0],[499.84,408.96,"Δ4",-2,0,0,0],[499.84,454.4,"Δ3",-2,0,0,0],[499.84,499.84,"F1",-2,0,0,0],[499.84,545.28,"F2",-2,0,0,0],[499.84,590.72,"F3",-2,0,0,0],[499.84,641.84,"F4",-2,0,0,0],[499.84,681.6,"F5",-2,0,0,0],[454.4,636.16,"Q2",-2,0,0,0],[454.4,590.72,"Q1",-2,0,0,0],[454.4,545.28,"S2",-2,0,0,0],[454.4,499.84,"S1",-2,0,0,0],[454.4,454.4,"Cy2",-2,0,0,0],[454.4,408.96,"Cy1",-2,0,0,0]],[[56.8,56.8,"(16) Hold for Applause"]],[[119.28,56.8,"Go to Ballad"]],[],["(16) End of Opener",156,0,12]]];
let playing = false;
let offset = 0;
let tool = "p";

updateControls(false, pageData[page]);
loadPage(pageData[page])

window.onbeforeprint = () => {
  query("#controls").style.display = "none";
  document.title = query("#pageName").value;
}

window.onafterprint = () => {
  query("#controls").style.display = "inline";
  document.title = "Marching Band Drill Maker | AP-Study";
}

function round(val) {
  return Math.round(val/5.68)*5.68;
}

function loadPage(data) {
  queryA(".dotContainer").forEach(elmnt => {
    elmnt.remove();
  })
  queryA(".title").forEach(elmnt => {
    elmnt.remove();
  })
  queryA(".text-label").forEach(elmnt => {
    elmnt.remove();
  })
  queryA(".pathContainer").forEach(elmnt => {
    elmnt.remove();
  })
  data[0].forEach(elmnt => {
    container.insertAdjacentHTML("beforeend",
      `<div class="dotContainer${elmnt[6] ? " toAnimate" : ""}" style="top: ${elmnt[0]}px; left: ${elmnt[1]}px;">
        <div class="dot"></div>
        <div class="label${elmnt[5] ? " hidden" : ""}" style="--position: ${elmnt[3]}; --rotation: ${elmnt[4]}">
          <span class="input">${elmnt[2]}</span>
        </div>`
  );
  })
  data[1].forEach(elmnt => {
    container.insertAdjacentHTML("beforeend",
    `<p class="title" style="top: ${elmnt[0]}px; left: ${elmnt[1]}px;">${elmnt[2]}</p>`
    )
  })
  data[2].forEach(elmnt => {
    container.insertAdjacentHTML("beforeend",
    `<p class="text-label" style="top: ${elmnt[0]}px; left: ${elmnt[1]}px;">${elmnt[2]}</p>`
    )
  })
}

function prevPage() {
  page--;
  loadPage(pageData[page]);
  updateControls(false, pageData[page])
}

function nextPage(save = true) {
  page++
  loadPage(pageData[page]);
  updateControls(false, pageData[page])
}

function query(val) {
  return document.querySelector(val);
}

function queryA(val) {
  return document.querySelectorAll(val);
}

let timeout;

function handlePlay() {
  if (playing) {
    query("#play-btn").textContent = "▶";
    playing = false;
    page--;
    loadPage(pageData[page]);
    clearTimeout(timeout);
    updateControls(false, pageData[page])
    return;
  }

  if (page + 1 === pageData.length) return;
  query("#play-btn").textContent = "⏹";
  playing = true;
  animate();
}

function startAnimation(paths, holdTime, moveTime) {
  queryA(".dotContainer").forEach(elmnt => {
    elmnt.remove();
  })
  queryA(".title").forEach(elmnt => {
    elmnt.remove();
  })
  queryA(".text-label").forEach(elmnt => {
    elmnt.remove();
  })
  queryA(".pathContainer").forEach(elmnt => {
    elmnt.remove();
  })
  
  const curPage = pageData[page][0];
  const nextPage = pageData[page + 1][0];
  curPage.forEach(curDot => {
    if (curDot[6] === 1) return;
    const nextDot = nextPage.find(nextItem => nextItem[6] === 0 && curDot[2] === nextItem[2]);
    if (nextDot) {
      container.insertAdjacentHTML("beforeend",
        `<div class="dotContainer animated" style="top: ${nextDot[0]}px; left: ${nextDot[1]}px;"><div class="dot"></div>`
      );

      const dot = container.lastElementChild;
      let startIdx = -1;
      let endIdx = -1;
      
      const path = paths.find(tempPath => {
        startIdx = tempPath.findIndex((pathDot, idx) =>
          idx !== 0 && curDot[0] === pathDot[0] && curDot[1] === pathDot[1]
        );
        if (startIdx !== -1) {
          endIdx = tempPath.findLastIndex((pathDot, idx) =>
            idx > startIdx && nextDot[0] === pathDot[0] && nextDot[1] === pathDot[1]
          );
        }
        return endIdx !== -1;
      })

      const animation = [
        {translate: `${curDot[1] - nextDot[1]}px ${curDot[0] - nextDot[0]}px`},
        {translate: `${curDot[1] - nextDot[1]}px ${curDot[0] - nextDot[0]}px`,
        offset: holdTime / (holdTime + moveTime)}
      ]

      if (startIdx !== -1 && endIdx !== -1) {
        let curOffset = holdTime / (holdTime + moveTime);
        let totalLength = 0;
        for (let i = startIdx; i < endIdx; i++) {
          totalLength += dist(path[i][0], path[i][1], path[i + 1][0], path[i + 1][1]);
        }
        for (let i = startIdx + 1; i < endIdx; i++) {
          if (path[0] === 1) {
            curOffset += moveTime/(holdTime + moveTime)*dist(path[i][0], path[i][1], path[i - 1][0], path[i - 1][1])/totalLength;
          } else {
            curOffset += moveTime/(holdTime + moveTime)/(endIdx-startIdx)
          }
          animation.push({
            translate: `${path[i][1] - nextDot[1]}px ${path[i][0] - nextDot[0]}px`,
            offset: curOffset
          })
        }
      }
      
      animation.push({translate: '0 0'});
      dot.animate(animation, holdTime + moveTime)
    }
  })
}

function dist(x1, y1, x2, y2) {
  return Math.sqrt((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2));
}

function animate() {
  if (page + 1 === pageData.length) {
    query("#play-btn").textContent = "▶";
    playing = false;
    loadPage(pageData[page]);
    return;
  }
  updateControls(true, pageData[page]);
  const holdTime = 60/pageData[page][4][1]*pageData[page][4][2]*1000;
  const moveTime = 60/pageData[page][4][1]*pageData[page][4][3]*1000;
  startAnimation(pageData[page][3], holdTime, moveTime);
  timeout = setTimeout(animate, holdTime + moveTime);
  page++;
}

function updateData(data, version, pageOnly = false) {
  if (pageOnly) {
    switch(version) {
      case 0: {
        data[3] = [data[3][0], 0, data[3][1]]
      }
      case 1: {
        data[0].forEach((dot, dotIdx) => {
          data[0][dotIdx] = [parsePX(dot[0]), parsePX(dot[1]), dot[2], dot[3], dot[4]];
        })
        data[1].forEach((dot, dotIdx) => {
          data[1][dotIdx] = [parsePX(title[0]), parsePX(title[1]), title[2]];
        })
        data[2].forEach((dot, dotIdx) => {
          data[2][dotIdx] = [parsePX(label[0]), parsePX(label[1]), label[2]];
        })
      }
      case 2: {
        data.push(data[3]);
        data[3] = [];
      }
      case 3: {
        data[4].unshift(`Page ${page + 1}`);
      }
      case 4: {
        data[3].forEach((path) => {path.unshift(0)});
      }
      case 5: {
        data[0].forEach((dot, dotIdx) => {
          data[0][dotIdx].push(0)
        })
      }
      case 6: {
        data[0].forEach((dot, dotIdx) => {
          data[0][dotIdx].push(0)
        })
      }
    }
  } else {
    switch(version) {
      case 0: {
        data.forEach((page, idx) => {
          data[idx][3] = [page[3][0],0,page[3][1]]
        })
      }
      case 1: {
        data.forEach((page, idx) => {
          page[0].forEach((dot, dotIdx) => {
            data[idx][0][dotIdx] = [parsePX(dot[0]), parsePX(dot[1]), dot[2], dot[3], dot[4]]
          })
          page[1].forEach((title, titleIdx) => {
            data[idx][1][titleIdx] = [parsePX(title[0]), parsePX(title[1]), title[2]]
          })
          page[2].forEach((label, labelIdx) => {
            data[idx][2][labelIdx] = [parsePX(label[0]), parsePX(label[1]), label[2]]
          })
        })
      }
      case 2: {
        data.forEach((page, idx) => {
          data[idx].push(page[3]);
          data[idx][3] = [];
        })
      }
      case 3: {
        data.forEach((page, idx) => {
          data[idx][4].unshift(`Page ${idx + 1}`)
        })
      }
      case 4: {
        data.forEach((page, idx) => {
          page[3].forEach((path, pathIdx) => {
            data[idx][3][pathIdx].unshift(0);
          })
        })
      }
      case 5: {
        data.forEach((page, idx) => {
          page[0].forEach((dot, dotIdx) => {
            data[idx][0][dotIdx].push(0)
          })
        })
      }
      case 6: {
        data.forEach((page, idx) => {
          page[0].forEach((dot, dotIdx) => {
            data[idx][0][dotIdx].push(0)
          })
        })
      }
    }
  }
  return data;
}

function parsePX(px) {
  return parseFloat(px.replace("px", ""))
}

function updateControls(disabled, curPage) {
  if (disabled) {
    next.disabled = true;
    prev.disabled = true;
  } else {
    next.disabled = (page + 1) === pageData.length;
    prev.disabled = page === 0;
  }
  query("#play-btn").disabled = page === pageData.length - 1;
}